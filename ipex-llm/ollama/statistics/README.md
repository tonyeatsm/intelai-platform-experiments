# Test log
```
🤖 Ollama 综合性能测试
============================================================
请输入并发请求数 (默认4): 1
请输入测试提示词 (默认: 请用中文解释一下牛顿第一定律，要求800字。): 

测试配置:
并发数: 1
提示词: '请用中文解释一下牛顿第一定律，要求800字。'

============================================================
🚀 第一阶段: 非流式测试 (生成速度)
============================================================
非流式请求 0: 生成 829 tokens, 耗时 22.79s

📊 非流式测试结果 (1 个成功请求):
--------------------------------------------------
并发测试总耗时: 22.79 秒
总生成Token数: 829
平均每个请求Token数: 829.0
平均每个请求耗时: 22.79 秒
最快请求耗时: 22.79 秒
最慢请求耗时: 22.79 秒
🎯 系统平均生成速度: 36.37 tokens/秒
系统吞吐量: 0.04 请求/秒

📝 样本响应: '<think>
好的，我现在要详细解释牛顿第一定律，并写一篇大约800字的中文文章。首先，我需要理解牛顿第一定律的内容和它的重要性。

牛顿第一定律，也就是惯性定律，说的是如果物体不受外力作用，原来运...'

============================================================
⏱️  第二阶段: 流式测试 (首Token耗时)
============================================================
✅ 流式请求 0: 首Token在 2.134s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'

📊 流式测试结果:
--------------------------------------------------
并发测试总耗时: 2.14 秒
总请求数: 1
成功请求: 1
成功且有首Token: 1

⏰ 首Token耗时统计 (TTFT):
平均 TTFT: 2.134 秒
最快: 2.134 秒
最慢: 2.134 秒
样本数: 1

📝 首Token内容样本:
  1. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:01:47.029457688Z","response":"\u003cthink\u003e","done":false}'

📈 附加信息:
平均生成速度（估算）: 0.00 tokens/秒




🤖 Ollama 综合性能测试
============================================================
请输入并发请求数 (默认4): 2
请输入测试提示词 (默认: 请用中文解释一下牛顿第一定律，要求800字。): 

测试配置:
并发数: 2
提示词: '请用中文解释一下牛顿第一定律，要求800字。'

============================================================
🚀 第一阶段: 非流式测试 (生成速度)
============================================================
非流式请求 1: 生成 645 tokens, 耗时 20.86s
非流式请求 0: 生成 892 tokens, 耗时 27.77s

📊 非流式测试结果 (2 个成功请求):
--------------------------------------------------
并发测试总耗时: 27.77 秒
总生成Token数: 1537
平均每个请求Token数: 768.5
平均每个请求耗时: 24.32 秒
最快请求耗时: 20.86 秒
最慢请求耗时: 27.77 秒
🎯 系统平均生成速度: 55.35 tokens/秒
系统吞吐量: 0.07 请求/秒

📝 样本响应: '<think>
好，用户让我用中文解释牛顿第一定律，并且要求800字。首先，我需要理解什么是牛顿第一定律。它通常被称为惯性定律，对吧？我记得它说物体如果不受外力作用，会保持原来的速度和运动状态。

接...'

============================================================
⏱️  第二阶段: 流式测试 (首Token耗时)
============================================================
✅ 流式请求 0: 首Token在 2.518s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 1: 首Token在 2.577s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'

📊 流式测试结果:
--------------------------------------------------
并发测试总耗时: 2.58 秒
总请求数: 2
成功请求: 2
成功且有首Token: 2

⏰ 首Token耗时统计 (TTFT):
平均 TTFT: 2.547 秒
最快: 2.518 秒
最慢: 2.577 秒
样本数: 2

📝 首Token内容样本:
  1. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:12:43.961454389Z","response":"\u003cthink\u003e","done":false}'
  2. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:12:44.020200235Z","response":"\u003cthink\u003e","done":false}'

📈 附加信息:
平均生成速度（估算）: 0.00 tokens/秒




🤖 Ollama 综合性能测试
============================================================
请输入并发请求数 (默认4): 
请输入测试提示词 (默认: 请用中文解释一下牛顿第一定律，要求800字。): 

测试配置:
并发数: 4
提示词: '请用中文解释一下牛顿第一定律，要求800字。'

============================================================
🚀 第一阶段: 非流式测试 (生成速度)
============================================================

非流式请求 0: 生成 876 tokens, 耗时 31.24s
非流式请求 2: 生成 910 tokens, 耗时 32.49s
非流式请求 1: 生成 1199 tokens, 耗时 42.14s
非流式请求 3: 生成 1463 tokens, 耗时 49.73s

📊 非流式测试结果 (4 个成功请求):
--------------------------------------------------
并发测试总耗时: 49.73 秒
总生成Token数: 4448
平均每个请求Token数: 1112.0
平均每个请求耗时: 38.90 秒
最快请求耗时: 31.24 秒
最慢请求耗时: 49.73 秒
🎯 系统平均生成速度: 89.44 tokens/秒
系统吞吐量: 0.08 请求/秒

📝 样本响应: '<think>
嗯，我现在要理解牛顿第一定律。首先，我记得牛顿有很多定律，这是第一定律，可能和运动有关。我应该先回忆一下学过的知识，或者查资料确认。

牛顿第一定律通常被称为惯性定律，对吗？它说如果一...'

============================================================
⏱️  第二阶段: 流式测试 (首Token耗时)
============================================================
✅ 流式请求 1: 首Token在 2.813s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 3: 首Token在 2.882s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 2: 首Token在 2.882s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 0: 首Token在 2.884s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'

📊 流式测试结果:
--------------------------------------------------
并发测试总耗时: 2.89 秒
总请求数: 4
成功请求: 4
成功且有首Token: 4

⏰ 首Token耗时统计 (TTFT):
平均 TTFT: 2.865 秒
最快: 2.813 秒
最慢: 2.884 秒
样本数: 4

📝 首Token内容样本:
  1. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:03:53.718859156Z","response":"\u003cthink\u003e","done":false}'
  2. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:03:53.654934726Z","response":"\u003cthink\u003e","done":false}'
  3. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:03:53.718079093Z","response":"\u003cthink\u003e","done":false}'

📈 附加信息:
平均生成速度（估算）: 0.00 tokens/秒



🤖 Ollama 综合性能测试
============================================================
请输入并发请求数 (默认4): 8
请输入测试提示词 (默认: 请用中文解释一下牛顿第一定律，要求800字。): 

测试配置:
并发数: 8
提示词: '请用中文解释一下牛顿第一定律，要求800字。'

============================================================
🚀 第一阶段: 非流式测试 (生成速度)
============================================================

非流式请求 5: 生成 593 tokens, 耗时 26.84s
非流式请求 3: 生成 1093 tokens, 耗时 50.13s
非流式请求 6: 生成 1105 tokens, 耗时 50.67s
非流式请求 1: 生成 1119 tokens, 耗时 51.26s
非流式请求 0: 生成 1134 tokens, 耗时 51.84s
非流式请求 2: 生成 1157 tokens, 耗时 52.67s
非流式请求 4: 生成 1230 tokens, 耗时 55.22s
非流式请求 7: 生成 2319 tokens, 耗时 87.68s

📊 非流式测试结果 (8 个成功请求):
--------------------------------------------------
并发测试总耗时: 87.68 秒
总生成Token数: 9750
平均每个请求Token数: 1218.8
平均每个请求耗时: 53.29 秒
最快请求耗时: 26.84 秒
最慢请求耗时: 87.68 秒
🎯 系统平均生成速度: 111.20 tokens/秒
系统吞吐量: 0.09 请求/秒

📝 样本响应: '<think>
嗯，用户让我用中文解释牛顿第一定律，并且要求800字左右。首先，我得确定用户到底是谁。可能是学生、老师或者对物理感兴趣的人。他们可能在学习牛顿的运动定律，需要更深入的理解。

牛顿第一...'

============================================================
⏱️  第二阶段: 流式测试 (首Token耗时)
============================================================
✅ 流式请求 3: 首Token在 3.823s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 5: 首Token在 3.870s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 1: 首Token在 3.917s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 2: 首Token在 3.917s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 6: 首Token在 3.915s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 0: 首Token在 3.919s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 4: 首Token在 3.918s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 7: 首Token在 3.917s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'

📊 流式测试结果:
--------------------------------------------------
并发测试总耗时: 3.92 秒
总请求数: 8
成功请求: 8
成功且有首Token: 8

⏰ 首Token耗时统计 (TTFT):
平均 TTFT: 3.899 秒
最快: 3.823 秒
最慢: 3.919 秒
样本数: 8

📝 首Token内容样本:
  1. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:06:27.767664503Z","response":"\u003cthink\u003e","done":false}'
  2. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:06:27.766230418Z","response":"\u003cthink\u003e","done":false}'
  3. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:06:27.767306126Z","response":"\u003cthink\u003e","done":false}'

📈 附加信息:
平均生成速度（估算）: 0.00 tokens/秒



🤖 Ollama 综合性能测试
============================================================
请输入并发请求数 (默认4): 16
请输入测试提示词 (默认: 请用中文解释一下牛顿第一定律，要求800字。): 

测试配置:
并发数: 16
提示词: '请用中文解释一下牛顿第一定律，要求800字。'

============================================================
🚀 第一阶段: 非流式测试 (生成速度)
============================================================
非流式请求 12: 生成 787 tokens, 耗时 140.23s
非流式请求 14: 生成 938 tokens, 耗时 167.50s
非流式请求 2: 生成 948 tokens, 耗时 169.29s
非流式请求 9: 生成 1000 tokens, 耗时 178.55s
非流式请求 4: 生成 1005 tokens, 耗时 179.44s
非流式请求 8: 生成 1121 tokens, 耗时 199.95s
非流式请求 1: 生成 1149 tokens, 耗时 204.88s
非流式请求 11: 生成 1154 tokens, 耗时 205.39s
非流式请求 6: 生成 1200 tokens, 耗时 207.71s
非流式请求 10: 生成 1279 tokens, 耗时 211.41s
非流式请求 3: 生成 1299 tokens, 耗时 212.31s
非流式请求 13: 生成 1303 tokens, 耗时 212.48s
非流式请求 7: 生成 1535 tokens, 耗时 221.58s
非流式请求 5: 生成 1658 tokens, 耗时 226.21s
非流式请求 15: 生成 1661 tokens, 耗时 226.32s
非流式请求 0: 生成 1684 tokens, 耗时 227.04s

📊 非流式测试结果 (16 个成功请求):
--------------------------------------------------
并发测试总耗时: 227.04 秒
总生成Token数: 19721
平均每个请求Token数: 1232.6
平均每个请求耗时: 199.39 秒
最快请求耗时: 140.23 秒
最慢请求耗时: 227.04 秒
🎯 系统平均生成速度: 86.86 tokens/秒
系统吞吐量: 0.07 请求/秒

📝 样本响应: '<think>
好，我现在要试着理解一下牛顿第一定律是什么。听说牛顿有很多定律，比如说第一、第二、第三定律，但具体是怎么回事呢？我先从网上找点资料看看。

首先，牛顿第一定律好像是关于物体运动状态的。...'

============================================================
⏱️  第二阶段: 流式测试 (首Token耗时)
============================================================
✅ 流式请求 7: 首Token在 13.350s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 9: 首Token在 13.695s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 1: 首Token在 13.699s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 12: 首Token在 13.693s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 6: 首Token在 13.697s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 14: 首Token在 13.693s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 15: 首Token在 13.693s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 8: 首Token在 13.698s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 4: 首Token在 13.701s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 2: 首Token在 13.702s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 0: 首Token在 13.703s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 5: 首Token在 13.702s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 11: 首Token在 13.699s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 13: 首Token在 13.699s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 10: 首Token在 13.701s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'
✅ 流式请求 3: 首Token在 13.873s 到达 → '{"model":"deepseek-r1:7b","created_at":"2025-08-29...'

📊 流式测试结果:
--------------------------------------------------
并发测试总耗时: 13.88 秒
总请求数: 16
成功请求: 16
成功且有首Token: 16

⏰ 首Token耗时统计 (TTFT):
平均 TTFT: 13.687 秒
最快: 13.350 秒
最慢: 13.873 秒
样本数: 16

📝 首Token内容样本:
  1. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:11:21.817382458Z","response":"\u003cthink\u003e","done":false}'
  2. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:11:21.809111597Z","response":"\u003cthink\u003e","done":false}'
  3. '{"model":"deepseek-r1:7b","created_at":"2025-08-29T06:11:21.8166604Z","response":"\u003cthink\u003e","done":false}'

📈 附加信息:
平均生成速度（估算）: 0.00 tokens/秒




```

# Test report
```
在Arc770上部署ipex-llm框架拉起ollama部署成功，并编写测试代码对单卡的“吞吐量”和“首Token延迟”进行测试。

测试prompt: 请用中文解释一下牛顿第一定律，要求800字。

非流式生成性能 (吞吐量测试)
并发数	总耗时(秒)	总生成Token	平均生成速度(tokens/秒)	系统吞吐量(请求/秒)
1	22.79	829	    36.37	0.04
2	27.77	1537	55.35	0.07
4	49.73	4448	89.44	0.08
8	87.68	9750	111.20	0.09
16	227.04	19721	86.86	0.07


流式响应性能 (首Token延迟测试)
并发数	平均TTFT(秒)	最快TTFT(秒)	最慢TTFT(秒)
1	2.134	2.134	2.134
2	2.547	2.518	2.577
4	2.865	2.813	2.884
8	3.899	3.823	3.919
16	13.687	13.350	13.873


结论：在8并发时达到性能峰值，生成速度超过110 tokens/秒。

```
